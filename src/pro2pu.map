
/** **/
MAPSYM

ProtoDoc ::= proto_v2 /*proto_v3*/ .

Package ::= package_stmt .
Message ::= message_v2 message_v3 .
Enum    ::= enum_v2 enum_v3 .
EnumField ::= enum_field .
EnumFieldName ::= enum_field_name .

PackageName ::= package_name .
MessageName ::= message_name .
MessageBody ::= message_body_v2 message_body_v3 .
EnumName ::= enum_name .
EnumBody ::= enum_body_v2 enum_body_v3 .
EnumFieldOptions ::= enum_field_options .

Label ::= label_v2 label_v3 .
Field ::= field_v2 field_v3 . /*required_field optional_field repeated_field .*/
FieldNumber ::= field_number enum_number .
FieldType ::= field_type .
FieldName ::= field_name .
FieldOptions ::= field_options .

DotOrNot ::= dot_or_not .

Extend ::= extend_v2 .
ExtendBody ::= extend_body_v2 .

MessageType ::= message_type2 .

MAPRULE

field_v2: label_v2 field_type field_name '=' field_number field_options ';' <$1$2$3$4$5> : rField .
field_v3: label_v3 field_type field_name '=' field_number field_options ';' <$1$2$3$4$5> : rField .
/*
required_field: 'required' field_type field_name '=' field_number field_options ';' <$1$2$3$4> : rRequiredField.
optional_field: 'optional' field_type field_name '=' field_number field_options ';' <$1$2$3$4> : rOptionalField .
repeated_field: 'repeated' field_type field_name '=' field_number field_options ';' <$1$2$3$4> : rRepeatedField .
*/

package_stmt: 'package' package_name ';' <$1> : rPackage.

message_v2: 'message' message_name message_body_v2 <$1$2> : rMessage .
message_v3: 'message' message_name message_body_v3 <$1$2> : rMessage .
enum_v2: 'enum' enum_name enum_body_v2 <$1$2> : rEnum.
enum_v3: 'enum' enum_name enum_body_v3 <$1$2> : rEnum.

enum_field: enum_field_name '=' enum_number enum_field_options ';' <$1$2$3> : rEnumField .

extend_v2: 'extend' message_type2 extend_body_v2 <$1$2> : rExtend .